async function submitSimpleCookieSelection(form, submitter) {
    try {
        const url = new URL('/cookie-consent/update', window.location.origin);

        const requestOptions = {
            method: 'POST',
            body: new FormData(form, submitter)
        };

        /**
         * Request object
         * @type {Request}
         */
        const request = new Request(url, requestOptions);

        /**
         * Response object
         * @type {Response}
         */
        const response = await fetch(request);

        if (response.ok) {
            await fetch(window.location.href);

            return Promise.resolve();
        } else {
            new Error(JSON.stringify(response));
            return Promise.reject();
        }
    } catch (e) {
        console.error(e);
    }
}

document.addEventListener("DOMContentLoaded", function () {
    const cookieConsent = document.querySelector('.cookie-consent');
    const cookieConsentForm = document.querySelector('.cookie-consent__form');


    cookieConsent.querySelector('.js-show-settings').addEventListener('click', function (event) {
        cookieConsent.querySelector('.cookie-consent-simple').style.display = 'none';
        cookieConsent.querySelector('.cookie-consent-detail').style.display = 'block';
    });

    // cookieConsent.querySelectorAll('.js-reject-all-cookies').forEach(item => {
    //     item.addEventListener('click', async (event) => {
    //         const form = item.closest('form');
    //         await submitSimpleCookieSelection(form, event.submitter);
    //     });
    // });
    //
    // cookieConsent.querySelectorAll('.js-accept-all-cookies').forEach(item => {
    //     item.addEventListener('click', async (event) => {
    //         const form = item.closest('form');
    //         await submitSimpleCookieSelection(form, event.submitter);
    //     });
    // });

    cookieConsent.querySelector('.js-consent-simple-form').addEventListener('submit', async function (event) {
        event.preventDefault();
        debugger;
        await submitSimpleCookieSelection(event.target, event.submitter);
    });

    if (cookieConsentForm) {
        // we got a form
        cookieConsentForm.querySelectorAll('.js-submit-cookie-consent-form');
        const formAction = cookieConsentForm.action || location.href;

        cookieConsentForm.addEventListener('submit', function (event) {
            event.preventDefault();

            fetch(formAction, {
                method: 'POST',
                body: new FormData(cookieConsentForm, event.submitter)
            }).then(function (res) {
                if (res.status >= 200 && res.status < 300) {
                    hideCookieConsentForm(cookieConsent, cookieConsentDialog);
                    dispatchSuccessEvent(event.submitter);
                }
            }).catch(function (error) {
                console.error('Error:', error);
            });
        });

        const cookieConsentDialog = document.querySelector('.cookie-consent-dialog');
        if (cookieConsentDialog) {
            // we got a dialog, show it
            cookieConsentDialog.showModal();
        }
    }
});

function dispatchSuccessEvent(submitter) {
    const formSubmittedEvent = new CustomEvent('cookie-consent-form-submit-successful', {
        detail: submitter
    });
    document.dispatchEvent(formSubmittedEvent);
}

function hideCookieConsentForm(cookieConsent, cookieConsentDialog) {
    if (cookieConsentDialog) {
        cookieConsentDialog.close();
    }
    cookieConsent.remove();
}
//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiY29va2llLWNvbnNlbnQubWluLmpzIiwic291cmNlcyI6WyIuLi8uLi9hc3NldHMvanMvY29va2llLWNvbnNlbnQubWpzIl0sInNvdXJjZXNDb250ZW50IjpbImFzeW5jIGZ1bmN0aW9uIHN1Ym1pdFNpbXBsZUNvb2tpZVNlbGVjdGlvbihmb3JtLCBzdWJtaXR0ZXIpIHtcbiAgICB0cnkge1xuICAgICAgICBjb25zdCB1cmwgPSBuZXcgVVJMKCcvY29va2llLWNvbnNlbnQvdXBkYXRlJywgd2luZG93LmxvY2F0aW9uLm9yaWdpbik7XG5cbiAgICAgICAgY29uc3QgcmVxdWVzdE9wdGlvbnMgPSB7XG4gICAgICAgICAgICBtZXRob2Q6ICdQT1NUJyxcbiAgICAgICAgICAgIGJvZHk6IG5ldyBGb3JtRGF0YShmb3JtLCBzdWJtaXR0ZXIpXG4gICAgICAgIH1cblxuICAgICAgICAvKipcbiAgICAgICAgICogUmVxdWVzdCBvYmplY3RcbiAgICAgICAgICogQHR5cGUge1JlcXVlc3R9XG4gICAgICAgICAqL1xuICAgICAgICBjb25zdCByZXF1ZXN0ID0gbmV3IFJlcXVlc3QodXJsLCByZXF1ZXN0T3B0aW9ucyk7XG5cbiAgICAgICAgLyoqXG4gICAgICAgICAqIFJlc3BvbnNlIG9iamVjdFxuICAgICAgICAgKiBAdHlwZSB7UmVzcG9uc2V9XG4gICAgICAgICAqL1xuICAgICAgICBjb25zdCByZXNwb25zZSA9IGF3YWl0IGZldGNoKHJlcXVlc3QpO1xuXG4gICAgICAgIGlmIChyZXNwb25zZS5vaykge1xuICAgICAgICAgICAgYXdhaXQgZmV0Y2god2luZG93LmxvY2F0aW9uLmhyZWYpO1xuXG4gICAgICAgICAgICByZXR1cm4gUHJvbWlzZS5yZXNvbHZlKCk7XG4gICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICBuZXcgRXJyb3IoSlNPTi5zdHJpbmdpZnkocmVzcG9uc2UpKTtcbiAgICAgICAgICAgIHJldHVybiBQcm9taXNlLnJlamVjdCgpO1xuICAgICAgICB9XG4gICAgfSBjYXRjaCAoZSkge1xuICAgICAgICBjb25zb2xlLmVycm9yKGUpO1xuICAgIH1cbn1cblxuZG9jdW1lbnQuYWRkRXZlbnRMaXN0ZW5lcihcIkRPTUNvbnRlbnRMb2FkZWRcIiwgZnVuY3Rpb24gKCkge1xuICAgIGNvbnN0IGNvb2tpZUNvbnNlbnQgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKCcuY29va2llLWNvbnNlbnQnKTtcbiAgICBjb25zdCBjb29raWVDb25zZW50Rm9ybSA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoJy5jb29raWUtY29uc2VudF9fZm9ybScpO1xuXG5cbiAgICBjb29raWVDb25zZW50LnF1ZXJ5U2VsZWN0b3IoJy5qcy1zaG93LXNldHRpbmdzJykuYWRkRXZlbnRMaXN0ZW5lcignY2xpY2snLCBmdW5jdGlvbiAoZXZlbnQpIHtcbiAgICAgICAgY29va2llQ29uc2VudC5xdWVyeVNlbGVjdG9yKCcuY29va2llLWNvbnNlbnQtc2ltcGxlJykuc3R5bGUuZGlzcGxheSA9ICdub25lJztcbiAgICAgICAgY29va2llQ29uc2VudC5xdWVyeVNlbGVjdG9yKCcuY29va2llLWNvbnNlbnQtZGV0YWlsJykuc3R5bGUuZGlzcGxheSA9ICdibG9jayc7XG4gICAgfSk7XG5cbiAgICAvLyBjb29raWVDb25zZW50LnF1ZXJ5U2VsZWN0b3JBbGwoJy5qcy1yZWplY3QtYWxsLWNvb2tpZXMnKS5mb3JFYWNoKGl0ZW0gPT4ge1xuICAgIC8vICAgICBpdGVtLmFkZEV2ZW50TGlzdGVuZXIoJ2NsaWNrJywgYXN5bmMgKGV2ZW50KSA9PiB7XG4gICAgLy8gICAgICAgICBjb25zdCBmb3JtID0gaXRlbS5jbG9zZXN0KCdmb3JtJyk7XG4gICAgLy8gICAgICAgICBhd2FpdCBzdWJtaXRTaW1wbGVDb29raWVTZWxlY3Rpb24oZm9ybSwgZXZlbnQuc3VibWl0dGVyKTtcbiAgICAvLyAgICAgfSk7XG4gICAgLy8gfSk7XG4gICAgLy9cbiAgICAvLyBjb29raWVDb25zZW50LnF1ZXJ5U2VsZWN0b3JBbGwoJy5qcy1hY2NlcHQtYWxsLWNvb2tpZXMnKS5mb3JFYWNoKGl0ZW0gPT4ge1xuICAgIC8vICAgICBpdGVtLmFkZEV2ZW50TGlzdGVuZXIoJ2NsaWNrJywgYXN5bmMgKGV2ZW50KSA9PiB7XG4gICAgLy8gICAgICAgICBjb25zdCBmb3JtID0gaXRlbS5jbG9zZXN0KCdmb3JtJyk7XG4gICAgLy8gICAgICAgICBhd2FpdCBzdWJtaXRTaW1wbGVDb29raWVTZWxlY3Rpb24oZm9ybSwgZXZlbnQuc3VibWl0dGVyKTtcbiAgICAvLyAgICAgfSk7XG4gICAgLy8gfSk7XG5cbiAgICBjb29raWVDb25zZW50LnF1ZXJ5U2VsZWN0b3IoJy5qcy1jb25zZW50LXNpbXBsZS1mb3JtJykuYWRkRXZlbnRMaXN0ZW5lcignc3VibWl0JywgYXN5bmMgZnVuY3Rpb24gKGV2ZW50KSB7XG4gICAgICAgIGV2ZW50LnByZXZlbnREZWZhdWx0KCk7XG4gICAgICAgIGRlYnVnZ2VyO1xuICAgICAgICBhd2FpdCBzdWJtaXRTaW1wbGVDb29raWVTZWxlY3Rpb24oZXZlbnQudGFyZ2V0LCBldmVudC5zdWJtaXR0ZXIpO1xuICAgIH0pO1xuXG4gICAgaWYgKGNvb2tpZUNvbnNlbnRGb3JtKSB7XG4gICAgICAgIC8vIHdlIGdvdCBhIGZvcm1cbiAgICAgICAgY29uc3Qgc3VibWl0QnV0dG9ucyA9IGNvb2tpZUNvbnNlbnRGb3JtLnF1ZXJ5U2VsZWN0b3JBbGwoJy5qcy1zdWJtaXQtY29va2llLWNvbnNlbnQtZm9ybScpO1xuICAgICAgICBjb25zdCBmb3JtQWN0aW9uID0gY29va2llQ29uc2VudEZvcm0uYWN0aW9uIHx8IGxvY2F0aW9uLmhyZWY7XG5cbiAgICAgICAgY29va2llQ29uc2VudEZvcm0uYWRkRXZlbnRMaXN0ZW5lcignc3VibWl0JywgZnVuY3Rpb24gKGV2ZW50KSB7XG4gICAgICAgICAgICBldmVudC5wcmV2ZW50RGVmYXVsdCgpO1xuXG4gICAgICAgICAgICBmZXRjaChmb3JtQWN0aW9uLCB7XG4gICAgICAgICAgICAgICAgbWV0aG9kOiAnUE9TVCcsXG4gICAgICAgICAgICAgICAgYm9keTogbmV3IEZvcm1EYXRhKGNvb2tpZUNvbnNlbnRGb3JtLCBldmVudC5zdWJtaXR0ZXIpXG4gICAgICAgICAgICB9KS50aGVuKGZ1bmN0aW9uIChyZXMpIHtcbiAgICAgICAgICAgICAgICBpZiAocmVzLnN0YXR1cyA+PSAyMDAgJiYgcmVzLnN0YXR1cyA8IDMwMCkge1xuICAgICAgICAgICAgICAgICAgICBoaWRlQ29va2llQ29uc2VudEZvcm0oY29va2llQ29uc2VudCwgY29va2llQ29uc2VudERpYWxvZyk7XG4gICAgICAgICAgICAgICAgICAgIGRpc3BhdGNoU3VjY2Vzc0V2ZW50KGV2ZW50LnN1Ym1pdHRlcik7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfSkuY2F0Y2goZnVuY3Rpb24gKGVycm9yKSB7XG4gICAgICAgICAgICAgICAgY29uc29sZS5lcnJvcignRXJyb3I6JywgZXJyb3IpO1xuICAgICAgICAgICAgfSk7XG4gICAgICAgIH0pO1xuXG4gICAgICAgIGNvbnN0IGNvb2tpZUNvbnNlbnREaWFsb2cgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKCcuY29va2llLWNvbnNlbnQtZGlhbG9nJyk7XG4gICAgICAgIGlmIChjb29raWVDb25zZW50RGlhbG9nKSB7XG4gICAgICAgICAgICAvLyB3ZSBnb3QgYSBkaWFsb2csIHNob3cgaXRcbiAgICAgICAgICAgIGNvb2tpZUNvbnNlbnREaWFsb2cuc2hvd01vZGFsKCk7XG4gICAgICAgIH1cbiAgICB9XG59KTtcblxuZnVuY3Rpb24gZGlzcGF0Y2hTdWNjZXNzRXZlbnQoc3VibWl0dGVyKSB7XG4gICAgY29uc3QgZm9ybVN1Ym1pdHRlZEV2ZW50ID0gbmV3IEN1c3RvbUV2ZW50KCdjb29raWUtY29uc2VudC1mb3JtLXN1Ym1pdC1zdWNjZXNzZnVsJywge1xuICAgICAgICBkZXRhaWw6IHN1Ym1pdHRlclxuICAgIH0pO1xuICAgIGRvY3VtZW50LmRpc3BhdGNoRXZlbnQoZm9ybVN1Ym1pdHRlZEV2ZW50KTtcbn1cblxuZnVuY3Rpb24gaGlkZUNvb2tpZUNvbnNlbnRGb3JtKGNvb2tpZUNvbnNlbnQsIGNvb2tpZUNvbnNlbnREaWFsb2cpIHtcbiAgICBpZiAoY29va2llQ29uc2VudERpYWxvZykge1xuICAgICAgICBjb29raWVDb25zZW50RGlhbG9nLmNsb3NlKCk7XG4gICAgfVxuICAgIGNvb2tpZUNvbnNlbnQucmVtb3ZlKCk7XG59Il0sIm5hbWVzIjpbXSwibWFwcGluZ3MiOiJBQUFBLGVBQWUsMkJBQTJCLENBQUMsSUFBSSxFQUFFLFNBQVMsRUFBRTtBQUM1RCxJQUFJLElBQUk7QUFDUixRQUFRLE1BQU0sR0FBRyxHQUFHLElBQUksR0FBRyxDQUFDLHdCQUF3QixFQUFFLE1BQU0sQ0FBQyxRQUFRLENBQUMsTUFBTSxDQUFDLENBQUM7QUFDOUU7QUFDQSxRQUFRLE1BQU0sY0FBYyxHQUFHO0FBQy9CLFlBQVksTUFBTSxFQUFFLE1BQU07QUFDMUIsWUFBWSxJQUFJLEVBQUUsSUFBSSxRQUFRLENBQUMsSUFBSSxFQUFFLFNBQVMsQ0FBQztBQUMvQyxVQUFTO0FBQ1Q7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLFFBQVEsTUFBTSxPQUFPLEdBQUcsSUFBSSxPQUFPLENBQUMsR0FBRyxFQUFFLGNBQWMsQ0FBQyxDQUFDO0FBQ3pEO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxRQUFRLE1BQU0sUUFBUSxHQUFHLE1BQU0sS0FBSyxDQUFDLE9BQU8sQ0FBQyxDQUFDO0FBQzlDO0FBQ0EsUUFBUSxJQUFJLFFBQVEsQ0FBQyxFQUFFLEVBQUU7QUFDekIsWUFBWSxNQUFNLEtBQUssQ0FBQyxNQUFNLENBQUMsUUFBUSxDQUFDLElBQUksQ0FBQyxDQUFDO0FBQzlDO0FBQ0EsWUFBWSxPQUFPLE9BQU8sQ0FBQyxPQUFPLEVBQUUsQ0FBQztBQUNyQyxTQUFTLE1BQU07QUFDZixZQUFZLElBQUksS0FBSyxDQUFDLElBQUksQ0FBQyxTQUFTLENBQUMsUUFBUSxDQUFD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
